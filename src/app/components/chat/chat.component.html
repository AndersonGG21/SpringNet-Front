<app-navbar></app-navbar>
<main class="container">
  <section class="chats">
    <p-autoComplete
      [(ngModel)]="selectedUser"
      [suggestions]="filteredUsers"
      field="username"
      [dropdown]="false"
      (completeMethod)="filterUsers($event)"
      (onSelect)="showSelectedUser()"
      placeholder="Search a contact"
    >
      <ng-template let-user pTemplate="item">
        <div class="user-item">
          <img src="{{ user.profileImg }}" width="30px" height="30px" />
          <div>{{ user.username }}</div>
        </div>
      </ng-template>
    </p-autoComplete>
    <span class="chat-span">DIRECT MESSAGES</span>
    <div class="direct-messages">
      <ng-container *ngFor="let user of users">
        <div class="user-rectangle" (click)="connect(user.id)">
          <div class="user-pic"></div>
          <div class="user-info">
            <span class="user-name">{{ user.username }}</span>
            <span class="preview">These exciting concepts seem...</span>
          </div>
        </div>
      </ng-container>
    </div>
  </section>
  <section class="chat-area">
    <header>
      <div>
        <div class="user-pic"></div>
      </div>
      <h4>Username</h4>
    </header>
    <div class="chat-text-area" #scrollMe [scrollTop]="scrollMe.scrollHeight - 100">
      <ng-container *ngFor="let message of messages">
        <div [ngClass]="message.sender != userID ? 'left' : 'right'">
          <div class="user-pic"></div>
          <div class="text">
            <span>{{ message.sender }}</span>
            <p>{{ message.content }}</p>
          </div>
        </div>
      </ng-container>
    </div>
    <footer>
      <input type="text" name="" id="" placeholder="Write a message" #msm />
      <button (click)="sendMessage(msm.value)">Send</button>
    </footer>
  </section>
</main>
